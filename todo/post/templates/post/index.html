<head>
    <script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="{% url 'post:index' %}">TODO</a>
        </div>
        <button type="button" class="btn btn-default navbar-btn" onclick="location.href='{% url 'logout' %}?next={% url 'post:index' %}'">로그아웃</button>
    </div>
</nav>

<div class="container">
    <form action="" method="post">
        {% csrf_token %}
        <div class="form-group">
            <input type="text" class="form-control" placeholder="제목" name="title">
        </div>
        <div class="form-group">
            <textarea class="form-control" placeholder="내용" name="content"></textarea>
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
    </form>
</div>

<div class="container">
    <div class="list-group">
        {% for task in tasks %}
            <li class="list-group-item list-group-item-success"><input type="checkbox" id="{{ task.pk }}" style="display: none;">{{ task.title }}</li>
        {% endfor %}
    </div>
</div>

<script>
    $('document').ready(function(){
        // checkbox 들에 click event listener 등록
        $(".list-group-item > :checkbox").each(function(){
            $(this).click(function(){
                var id = $(this).attr("id");
                var url = "{% url 'post:finish' 12345 %}".replace(/12345/, id);
                window.location.href = url;
            })
        });
        // list-group-item 들에 checkbox toggling 시키는 click event handler 등록
        $(".list-group-item").each(function(){
            $(this).click(function(){
               $(this).children(":checkbox").toggle();
            });
        });
    })
</script>
</body>